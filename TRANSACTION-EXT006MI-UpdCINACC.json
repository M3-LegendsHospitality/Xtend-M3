{"programModules":{"EXT006MI":{"program":"EXT006MI","triggers":{},"transactions":{"UpdCINACC":{"sourceUuid":"ba4282aa-af82-43a4-aa9a-de453f1c4f6b","name":"UpdCINACC","program":"EXT006MI","description":"Cinacc Correction","active":false,"multi":true,"modified":1639549832043,"modifiedBy":"TTEJASWI","outputFields":[{"name":"CONO","description":"company","length":3,"mandatory":false,"type":"N"}],"inputFields":[{"name":"CONO","description":"company","length":3,"mandatory":true,"type":"N"},{"name":"DIVI","description":"division","length":3,"mandatory":true,"type":"A"},{"name":"ANBR","description":"accounting number","length":12,"mandatory":true,"type":"N"},{"name":"SENO","description":"sequence number","length":4,"mandatory":true,"type":"N"},{"name":"AIT1","description":"accounting dimension 1","length":10,"mandatory":false,"type":"A"},{"name":"AIT2","description":"accounting dimension 2","length":10,"mandatory":false,"type":"A"},{"name":"AIT3","description":"accounting dimension 3","length":10,"mandatory":false,"type":"A"},{"name":"AIT4","description":"accounting dimension 4","length":10,"mandatory":false,"type":"A"},{"name":"AIT5","description":"accounting dimension 5","length":10,"mandatory":false,"type":"A"},{"name":"AIT6","description":"accounting dimension 6","length":10,"mandatory":false,"type":"A"},{"name":"AIT7","description":"accounting dimension 7","length":10,"mandatory":false,"type":"A"},{"name":"ERCD","description":"error","length":1,"mandatory":false,"type":"A"}],"utilities":[]}},"batches":{},"advancedPrograms":{}}},"utilities":{},"sources":{"ba4282aa-af82-43a4-aa9a-de453f1c4f6b":{"uuid":"ba4282aa-af82-43a4-aa9a-de453f1c4f6b","updated":1711007384789,"updatedBy":"XRBADUGU","created":1711005923973,"createdBy":"XRBADUGU","apiVersion":"UNKNOWN","beVersion":"16.0.0.20240116163623.5","language":"GROOVY","codeHash":"06F9B69E7D04B0E71B1BF0F8311A1DE62B55A021430CDC3DE00EE7887E35F177","code":"LyoqDQoqICBCdXNpbmVzcyBFbmdpbmUgRXh0ZW5zaW9uDQoqLw0KLyoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioNCkV4dGVuc2lvbiBOYW1lOiBVcGRDSU5BQ0MNClR5cGUgOiBFeHRlbmRNM1RyYW5zYWN0aW9uDQpTY3JpcHQgQXV0aG9yOiBUYXBlc2ggVGVqYXN3aQ0KRGF0ZTogMjAyMS0xMS0xOA0KIA0KRGVzY3JpcHRpb246DQogICAgICBVcGRhdGUgQ0lOQUNDIEZJTEUNCiAgICAgICAgIA0KUmV2aXNpb24gSGlzdG9yeToNCk5hbWUgICAgICAgICAgICAgICAgICAgIERhdGUgICAgICAgICAgICAgVmVyc2lvbiAgICAgICAgICBEZXNjcmlwdGlvbiBvZiBDaGFuZ2VzDQpUYXBlc2ggVGVqYXN3aSAgICAgIAkJMjAyMS0xMS0xOAkJCSAgICAgMS4wICAgICAgICAgICAgICBJbml0aWFsIFZlcnNpb24NClRhcGVzaCBUZWphc3dpICAgICAgCQkyMDIxLTEyLTMwCQkJICAgICAxLjEgICAgICAgICAgICAgIFZhbGlkYXRpb24gZm9yIGRpZmZlcmVudCBkaW1lbnNpb25zDQpSYWphc2hla2FyIEJhZHVndSAgICAgICAyMDI0LTAzLTIwICAgICAgICAgICAxLjIgICAgICAgICAgICAgIENoYW5nZWQgRGF0YXR5cGVzIGFuZCBhZGRlZCBjb21tZW50cyBmb3IgbWV0aG9kcw0KKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqLw0KaW1wb3J0IGphdmEudGltZS5Mb2NhbERhdGUNCmltcG9ydCBqYXZhLnRpbWUuTG9jYWxUaW1lDQppbXBvcnQgamF2YS50aW1lLmZvcm1hdC5EYXRlVGltZUZvcm1hdHRlcg0KcHVibGljIGNsYXNzIFVwZENJTkFDQyBleHRlbmRzIEV4dGVuZE0zVHJhbnNhY3Rpb24gew0KICBwcml2YXRlIGZpbmFsIE1JQVBJIG1pDQogIHByaXZhdGUgZmluYWwgRGF0YWJhc2VBUEkgZGF0YWJhc2UNCiAgcHJpdmF0ZSBmaW5hbCBQcm9ncmFtQVBJIHByb2dyYW0NCiAgcHJpdmF0ZSBmaW5hbCBMb2dnZXJBUEkgbG9nZ2VyDQogIHByaXZhdGUgZmluYWwgTUlDYWxsZXJBUEkgbWlDYWxsZXINCiAgDQogIHB1YmxpYyBVcGRDSU5BQ0MoTUlBUEkgbWksIERhdGFiYXNlQVBJIGRhdGFiYXNlLExvZ2dlckFQSSBsb2dnZXIsIE1JQ2FsbGVyQVBJIG1pQ2FsbGVyLCBQcm9ncmFtQVBJIHByb2dyYW0pIHsNCiAgICB0aGlzLm1pID0gbWkNCiAgICB0aGlzLmRhdGFiYXNlID0gZGF0YWJhc2UNCiAgICB0aGlzLnByb2dyYW0gPSBwcm9ncmFtDQogICAgdGhpcy5taUNhbGxlciA9IG1pQ2FsbGVyDQogICAgdGhpcy5sb2dnZXIgPSBsb2dnZXINCiAgfQ0KICANCiAgcHVibGljIHZvaWQgbWFpbigpIHsNCiAgICBpbnQgaW5DT05PID0gbWkuaW4uZ2V0KCJDT05PIikNCiAgICBTdHJpbmcgaW5ESVZJID0gbWkuaW4uZ2V0KCJESVZJIikNCiAgICBpbnQgaW5BTkJSID0gbWkuaW4uZ2V0KCJBTkJSIikNCiAgICBpbnQgaW5TRU5PID0gbWkuaW4uZ2V0KCJTRU5PIikNCiAgICBTdHJpbmcgaW5BSVQxID0gbWkuaW4uZ2V0KCJBSVQxIikNCiAgICBTdHJpbmcgaW5BSVQyID0gbWkuaW4uZ2V0KCJBSVQyIikNCiAgICBTdHJpbmcgaW5BSVQzID0gbWkuaW4uZ2V0KCJBSVQzIikNCiAgICBTdHJpbmcgaW5BSVQ0ID0gbWkuaW4uZ2V0KCJBSVQ0IikNCiAgICBTdHJpbmcgaW5BSVQ1ID0gbWkuaW4uZ2V0KCJBSVQ1IikNCiAgICBTdHJpbmcgaW5BSVQ2ID0gbWkuaW4uZ2V0KCJBSVQ2IikNCiAgICBTdHJpbmcgaW5BSVQ3ID0gbWkuaW4uZ2V0KCJBSVQ3IikNCiAgICBjaGFyIGluRVJDRCA9IG1pLmluLmdldCgiRVJDRCIpDQogICAgU3RyaW5nIHZVU0VSID0gcHJvZ3JhbS5nZXRVc2VyKCkNCiAgICANCiAgICAvLyB2YWxpZGF0ZSBhbGwgaW5wdXQgZmllbGRzDQogICAgaWYoaW5DT05PLmVxdWFscygiIikgfHwgaW5DT05PID09IG51bGwpew0KICAgICAgaW5DT05PID0gMA0KICAgIH0NCiAJICBpZihpbkRJVkkuZXF1YWxzKCIiKSB8fCBpbkRJVkkgPT0gbnVsbCl7DQogICAgICBpbkRJVkkgPSIiDQogICAgfQ0KIAkgIGlmKGluQU5CUi5lcXVhbHMoIiIpIHx8IGluQU5CUiA9PSBudWxsKXsNCiAgICAgIGluQU5CUiA9IDANCiAgICB9DQogICAgaWYoaW5TRU5PLmVxdWFscygiIikgfHwgaW5TRU5PID09IG51bGwpew0KICAgICAgaW5TRU5PID0gMA0KICAgIH0NCg0KICAgIGlmKGluQUlUMS5lcXVhbHMoIiIpIHx8IGluQUlUMSA9PSBudWxsKXsNCiAgICAgIGluQUlUMSA9IiINCiAgICB9DQogCSAgaWYoaW5BSVQyLmVxdWFscygiIikgfHwgaW5BSVQyID09IG51bGwpew0KICAgICAgaW5BSVQyID0iIg0KICAgIH0NCiAJICBpZihpbkFJVDMuZXF1YWxzKCIiKSB8fCBpbkFJVDMgPT0gbnVsbCl7DQogICAgICBpbkFJVDMgPSIiDQogICAgfQ0KIAkgIGlmKGluQUlUNC5lcXVhbHMoIiIpIHx8IGluQUlUNCA9PSBudWxsKXsNCiAgICAgIGluQUlUNCA9IiINCiAgICB9DQogCSAgaWYoaW5BSVQ1LmVxdWFscygiIikgfHwgaW5BSVQ1ID09IG51bGwpew0KICAgICAgaW5BSVQ1ID0iIg0KICAgIH0NCiAJICBpZihpbkFJVDYuZXF1YWxzKCIiKSB8fCBpbkFJVDYgPT0gbnVsbCl7DQogICAgICBpbkFJVDYgPSIiDQogICAgfQ0KIAkgIGlmKGluQUlUNy5lcXVhbHMoIiIpIHx8IGluQUlUNyA9PSBudWxsKXsNCiAgICAgIGluQUlUNyA9IiINCiAgICB9DQogCSAgaWYoaW5FUkNELmVxdWFscygiIikgfHwgaW5FUkNEID09IG51bGwpew0KIAkgICAvLyAgIFN0cmluZyBibGFuayA9ICIiDQogICAgICBpbkVSQ0QgPSAnICcNCiAgICB9DQogICAgDQogICAgLy8gdmFsaWRhdGUgYWNjb3VudGluZyBkaW1lbnNpb25zDQogICAgLy8gIC0tIHZhbGlkYXRlIGFjY291bnRpbmcgZGltZW5zaW9uIDEgDQogICAgU3RyaW5nIHZhbGlkQWNjRGltMSA9ICIiDQogICAgdmFsaWRBY2NEaW0xID0gdmFsaWRhdGVBY2NEaW0xKGluRElWSSxpbkFJVDEpDQogICAgaWYodmFsaWRBY2NEaW0xLmVxdWFscygiZmFsc2UiKSl7DQogICAgICBtaS5lcnJvcigiZXJyb3IgaW4gZGltMSIpDQogICAgICByZXR1cm4NCiAgICB9DQogICAgLy8gIC0tIHZhbGlkYXRlIGFjY291bnRpbmcgZGltZW5zaW9uIDIgDQogICAgU3RyaW5nIGRpbTIgPSAiMiINCiAgICBTdHJpbmcgdmFsaWRBY2NEaW0yID0gIiINCiAgICB2YWxpZEFjY0RpbTIgPSB2YWxpZGF0ZUFjY0RpbWVuc2lvbnMoaW5ESVZJLGluQUlUMSxpbkFJVDIsZGltMikNCiAgICBpZih2YWxpZEFjY0RpbTIuZXF1YWxzKCJmYWxzZSIpKXsNCiAgICAgIG1pLmVycm9yKCJlcnJvciBpbiBkaW0yIikNCiAgICAgIHJldHVybg0KICAgIH0NCiAgICAgLy8gIC0tIHZhbGlkYXRlIGFjY291bnRpbmcgZGltZW5zaW9uIDMgDQogICAgU3RyaW5nIGRpbTMgPSAiMyINCiAgICBTdHJpbmcgdmFsaWRBY2NEaW0zID0gIiINCiAgICB2YWxpZEFjY0RpbTMgPSB2YWxpZGF0ZUFjY0RpbWVuc2lvbnMoaW5ESVZJLGluQUlUMSxpbkFJVDMsZGltMykNCiAgICBpZih2YWxpZEFjY0RpbTMuZXF1YWxzKCJmYWxzZSIpKXsNCiAgICAgIG1pLmVycm9yKCJlcnJvciBpbiBkaW0zIikNCiAgICAgIHJldHVybg0KICAgfQ0KICAgICAvLyAgLS0gdmFsaWRhdGUgYWNjb3VudGluZyBkaW1lbnNpb24gNCANCiAgIFN0cmluZyBkaW00ID0gIjQiDQogICBTdHJpbmcgdmFsaWRBY2NEaW00ID0gIiINCiAgIHZhbGlkQWNjRGltNCA9IHZhbGlkYXRlQWNjRGltZW5zaW9ucyhpbkRJVkksaW5BSVQxLGluQUlUNCxkaW00KQ0KICAgaWYodmFsaWRBY2NEaW00LmVxdWFscygiZmFsc2UiKSl7DQogICAgIG1pLmVycm9yKCJlcnJvciBpbiBkaW00IikNCiAgICAgcmV0dXJuDQogICB9DQogICAgIC8vICAtLSB2YWxpZGF0ZSBhY2NvdW50aW5nIGRpbWVuc2lvbiA1IA0KICAgIFN0cmluZyBkaW01ID0gIjUiDQogICAgU3RyaW5nIHZhbGlkQWNjRGltNSA9ICIiDQogICAgdmFsaWRBY2NEaW01ID0gdmFsaWRhdGVBY2NEaW1lbnNpb25zKGluRElWSSxpbkFJVDEsaW5BSVQ1LGRpbTUpDQogICAgaWYodmFsaWRBY2NEaW01LmVxdWFscygiZmFsc2UiKSl7DQogICAgICBtaS5lcnJvcigiZXJyb3IgaW4gZGltNSIpDQogICAgICByZXR1cm4NCiAgIH0NCiAgICAgLy8gIC0tIHZhbGlkYXRlIGFjY291bnRpbmcgZGltZW5zaW9uIDYgDQogICBTdHJpbmcgZGltNiA9ICI2Ig0KICAgU3RyaW5nIHZhbGlkQWNjRGltNiA9ICIiDQogICB2YWxpZEFjY0RpbTYgPSB2YWxpZGF0ZUFjY0RpbWVuc2lvbnMoaW5ESVZJLGluQUlUMSxpbkFJVDYsZGltNikNCiAgIGlmKHZhbGlkQWNjRGltNi5lcXVhbHMoImZhbHNlIikpew0KICAgICBtaS5lcnJvcigiZXJyb3IgaW4gZGltNiIpDQogICAgIHJldHVybg0KICAgfQ0KICAgICAvLyAgLS0gdmFsaWRhdGUgYWNjb3VudGluZyBkaW1lbnNpb24gNyANCiAgICBTdHJpbmcgZGltNyA9ICI3Ig0KICAgIFN0cmluZyB2YWxpZEFjY0RpbTcgPSAiIg0KICAgIHZhbGlkQWNjRGltNyA9IHZhbGlkYXRlQWNjRGltZW5zaW9ucyhpbkRJVkksaW5BSVQxLGluQUlUNyxkaW03KQ0KICAgIGlmKHZhbGlkQWNjRGltNy5lcXVhbHMoImZhbHNlIikpew0KICAgICAgbWkuZXJyb3IoImVycm9yIGluIGRpbTciKQ0KICAgICAgcmV0dXJuDQogICAgfQ0KICAgIC8vIEluc2VydCAgTGluZSBkYXRhDQogICAgREJBY3Rpb24gZGJhQ0lOQUNDID0gZGF0YWJhc2UudGFibGUoIkNJTkFDQyIpLmluZGV4KCIwMCIpLnNlbGVjdGlvbigiRVpDT05PIiwgIkVaRElWSSIsICJFWkFOQlIiLCAiRVpTRU5PIiwiRVpBSVQxIiwiRVpBSVQyIiwiRVpBSVQzIiwiRVpBSVQ0IiwiRVpBSVQ1IiwiRVpBSVQ2IiwiRVpBSVQ3IiwiRVpFUkNEIikuYnVpbGQoKQ0KDQogICAgREJDb250YWluZXIgY29uQ0lOQUNDID0gZGJhQ0lOQUNDLmdldENvbnRhaW5lcigpDQogICAgY29uQ0lOQUNDLnNldCgiRVpDT05PIiwgaW5DT05PKQ0KICAgIGNvbkNJTkFDQy5zZXQoIkVaRElWSSIsIGluRElWSSkNCiAgICBjb25DSU5BQ0Muc2V0KCJFWkFOQlIiLCBpbkFOQlIpDQogICAgY29uQ0lOQUNDLnNldCgiRVpTRU5PIiwgaW5TRU5PKQ0KICAgIA0KICAgIGlmKCFkYmFDSU5BQ0MucmVhZChjb25DSU5BQ0MpKSB7DQogICAgICAgbWkuZXJyb3IoIlRoZXJlIGlzIG5vIHJlY29yZHMgISAiICsgaW5DT05PICsgIiAvICIgKyBpbkRJVkkgKyAiIC8gIiArIGluQU5CUiArICIgLyAiICsgaW5TRU5PKQ0KICAgICAgIHJldHVybg0KICAgICB9IGVsc2UgaWYgKGRiYUNJTkFDQy5yZWFkKGNvbkNJTkFDQykpIHsNCgkvLyBWYWxpZGF0ZSBpbnB1dA0KCSAgICBDbG9zdXJlPD8+IHVwZGF0ZUNJTkFDQ0NhbGxCYWNrID0geyBMb2NrZWRSZXN1bHQgbG9ja2VkUmVzdWx0IC0+ICANCiAgCSAgICANCiAgICAgICAgICBsb2NrZWRSZXN1bHQuc2V0KCJFWkFJVDEiLCBpbkFJVDEpIA0KICAgICAgICAgIGxvY2tlZFJlc3VsdC5zZXQoIkVaQUlUMiIsIGluQUlUMikgDQogICAgICAgICAgbG9ja2VkUmVzdWx0LnNldCgiRVpBSVQzIiwgaW5BSVQzKSANCiAgICAgICAgICBsb2NrZWRSZXN1bHQuc2V0KCJFWkFJVDQiLCBpbkFJVDQpIA0KICAgICAgICAgIGxvY2tlZFJlc3VsdC5zZXQoIkVaQUlUNSIsIGluQUlUNSkgDQogICAgICAgICAgbG9ja2VkUmVzdWx0LnNldCgiRVpBSVQ2IiwgaW5BSVQ2KSANCiAgICAgICAgICBsb2NrZWRSZXN1bHQuc2V0KCJFWkFJVDciLCBpbkFJVDcpIA0KICAgICAgICAgIGxvY2tlZFJlc3VsdC5zZXQoIkVaRVJDRCIsIGluRVJDRCkgDQogICAgICAgICAgbG9ja2VkUmVzdWx0LnNldCgiRVpDSElEIiwgdlVTRVIpDQoNCiAgICAgIGxvY2tlZFJlc3VsdC5zZXQoIkVaTE1EVCIsIExvY2FsRGF0ZS5ub3coKS5mb3JtYXQoRGF0ZVRpbWVGb3JtYXR0ZXIub2ZQYXR0ZXJuKCJ5eXl5TU1kZCIpKS50b0ludGVnZXIoKSkNCiAgICAgIExvY2FsVGltZSB0aW1lID0gTG9jYWxUaW1lLm5vdygpDQogICAgICBTdHJpbmcgaG91ciA9ICBTdHJpbmcudmFsdWVPZih0aW1lLmdldEhvdXIoKSkNCiAgICAgIGlmIChob3VyLmxlbmd0aCgpID09IDEpIHsNCiAgICAgICAgaG91ciA9ICIwIitob3VyDQogICAgICB9DQogICAgICBTdHJpbmcgbWluPSAgU3RyaW5nLnZhbHVlT2YodGltZS5nZXRNaW51dGUoKSkNCiAgICAgIGlmIChtaW4ubGVuZ3RoKCkgPT0gMSkgew0KICAgICAgICBtaW49ICIwIittaW4NCiAgICAgIH0NCiAgICAgIFN0cmluZyBzZWMgPSAgU3RyaW5nLnZhbHVlT2YodGltZS5nZXRTZWNvbmQoKSkNCiAgICAgIGlmIChzZWMgLmxlbmd0aCgpID09IDEpIHsNCiAgICAgICAgc2VjID0gIjAiK3NlYyANCiAgICAgIH0gIA0KICAgICAgU3RyaW5nIGFjdHVhbFRpbWUgPSBob3VyKyIiK21pbisiIitzZWMNCiAgICAgIGxvY2tlZFJlc3VsdC5zZXQoIkVaTE1UUyIsIEludGVnZXIucGFyc2VJbnQoYWN0dWFsVGltZSkpDQogICAgICBsb2NrZWRSZXN1bHQuc2V0KCJFWkNITk8iLCBsb2NrZWRSZXN1bHQuZ2V0SW50KCJFWkNITk8iKSArIDEpDQogICAgICBsb2dnZXIuZGVidWcoIlRoZXJlIGlzIG5vIHJlY29yZHMgISAiICsgaW5DT05PICsgIiAvICIgKyBpbkRJVkkgKyAiIC8gIiArIGluQU5CUiArICIgLyAiICsgaW5TRU5PKQ0KICAgICAgICAgICANCiAgICAgIGxvY2tlZFJlc3VsdC51cGRhdGUoKQ0KCSAgICB9DQoJICAgIGlmKCFkYmFDSU5BQ0MucmVhZExvY2soY29uQ0lOQUNDLCB1cGRhdGVDSU5BQ0NDYWxsQmFjaykpIHsNCiAgICAgICAgbWkuZXJyb3IoIlRoZSByZWNvcmQgZG9lcyBub3QgZXhpc3RzIikNCiAgICAgICAgcmV0dXJuDQogICANCiAgICAgIH1lbHNlew0KICAgICAgICB1cGRDSU5IRUEoaW5DT05PLGluRElWSSxpbkFOQlIpDQogICAgICB9DQogICAgfQ0KICB9DQogIC8vIHVwZGF0ZSBDSU5IRUEgVGFibGUNCiAgdm9pZCAgdXBkQ0lOSEVBKGludCBDT05PLFN0cmluZyBESVZJLGludCBBTkJSKXsNCiAgICBTdHJpbmcgdlVTRVIgPSBwcm9ncmFtLmdldFVzZXIoKQ0KICAgICAgLy8gSW5zZXJ0ICBMaW5lIGRhdGENCiAgICBEQkFjdGlvbiBkYmFDSU5IRUEgPSBkYXRhYmFzZS50YWJsZSgiQ0lOSEVBIikuaW5kZXgoIjAwIikuc2VsZWN0aW9uKCJFSENPTk8iLCAiRUhESVZJIiwgIkVIQU5CUiIsICJFSFNUQVQiKS5idWlsZCgpDQogICAgDQogICAgREJDb250YWluZXIgY29uQ0lOQUNDID0gZGJhQ0lOSEVBLmdldENvbnRhaW5lcigpDQogICAgY29uQ0lOQUNDLnNldCgiRUhDT05PIiwgQ09OTykNCiAgICBjb25DSU5BQ0Muc2V0KCJFSERJVkkiLCBESVZJKQ0KICAgIGNvbkNJTkFDQy5zZXQoIkVIQU5CUiIsIEFOQlIpDQogICANCiAgICANCiAgICBpZighZGJhQ0lOSEVBLnJlYWQoY29uQ0lOQUNDKSkgew0KICAgICAgbWkuZXJyb3IoIlRoZXJlIGlzIG5vIHJlY29yZHMgQ0lOQUhIICEgIiArIENPTk8gKyAiIC8gIiArIERJVkkgKyAiIC8gIiArIEFOQlIgKQ0KICAgICAgcmV0dXJuDQogICAgfWVsc2UgaWYgKGRiYUNJTkhFQS5yZWFkKGNvbkNJTkFDQykpIHsNCgkgIC8vIFZhbGlkYXRlIGlucHV0DQogICAgICBDbG9zdXJlPD8+IHVwZGF0ZUNJTkFDQ0NhbGxCYWNrID0geyBMb2NrZWRSZXN1bHQgbG9ja2VkUmVzdWx0IC0+ICANCiAgICAgICAgbG9ja2VkUmVzdWx0LnNldCgiRUhTVEFUIiwgIjUwIikNCiAgICAgICAgbG9ja2VkUmVzdWx0LnNldCgiRUhDSElEIiwgdlVTRVIpDQogICAgICAgIGxvY2tlZFJlc3VsdC5zZXQoIkVITE1EVCIsIExvY2FsRGF0ZS5ub3coKS5mb3JtYXQoRGF0ZVRpbWVGb3JtYXR0ZXIub2ZQYXR0ZXJuKCJ5eXl5TU1kZCIpKS50b0ludGVnZXIoKSkNCiAgICAgICAgTG9jYWxUaW1lIHRpbWUgPSBMb2NhbFRpbWUubm93KCkNCiAgICAgICAgU3RyaW5nIGhvdXIgPSAgU3RyaW5nLnZhbHVlT2YodGltZS5nZXRIb3VyKCkpDQogICAgICAgIGlmIChob3VyLmxlbmd0aCgpID09IDEpIHsNCiAgICAgICAgICBob3VyID0gIjAiK2hvdXINCiAgICAgICAgfQ0KICAgICAgICBTdHJpbmcgbWluPSAgU3RyaW5nLnZhbHVlT2YodGltZS5nZXRNaW51dGUoKSkNCiAgICAgICAgaWYgKG1pbi5sZW5ndGgoKSA9PSAxKSB7DQogICAgICAgICAgbWluPSAiMCIrbWluDQogICAgICAgIH0NCiAgICAgICAgU3RyaW5nIHNlYyA9ICBTdHJpbmcudmFsdWVPZih0aW1lLmdldFNlY29uZCgpKSANCiAgICAgICAgaWYgKHNlYyAubGVuZ3RoKCkgPT0gMSkgew0KICAgICAgICAgIHNlYyA9ICIwIitzZWMgDQogICAgICAgIH0gIA0KICAgICAgICBTdHJpbmcgYWN0dWFsVGltZSA9IGhvdXIrIiIrbWluKyIiK3NlYw0KICAgICAgICBsb2NrZWRSZXN1bHQuc2V0KCJFSExNVFMiLCBJbnRlZ2VyLnBhcnNlSW50KGFjdHVhbFRpbWUpKQ0KICAgICAgICBsb2NrZWRSZXN1bHQuc2V0KCJFSENITk8iLCBsb2NrZWRSZXN1bHQuZ2V0SW50KCJFSENITk8iKSArIDEpDQogICAgICAgIA0KICAgICAgICAgICANCiAgICAgICAgbG9ja2VkUmVzdWx0LnVwZGF0ZSgpDQogICAgICAgIA0KCSAgICB9DQogICAgICBpZighZGJhQ0lOSEVBLnJlYWRMb2NrKGNvbkNJTkFDQywgdXBkYXRlQ0lOQUNDQ2FsbEJhY2spKSB7DQogICAgICAgIGxvZ2dlci5kZWJ1ZygiVGhlIHJlY29yZCBkb2VzIG5vdCBleGlzdHMiKQ0KICAgICAgICByZXR1cm4NCiAgICAgIH0NCiAgICB9DQogIH0NCiAgLy8tLS0gdmFsaWRhdGVBY2NEaW0xDQogIFN0cmluZyB2YWxpZGF0ZUFjY0RpbTEoU3RyaW5nIGRpdmlzaW9uLCBTdHJpbmcgYWNjb3VudGluZ0lkZW50aXR5KXsNCiAgICBTdHJpbmcgYWNjZGltID0gIjEiDQogICAgU3RyaW5nIHJlc3VsdHMgPSAidHJ1ZSINCiAgICBNYXA8U3RyaW5nLCBTdHJpbmc+IHJlc3VsdCA9IFs6XQ0KICAgIE1hcDxTdHJpbmcsIFN0cmluZz4gcGFyYW1zID0gWyJESVZJIjpkaXZpc2lvbiwiQUlUUCI6YWNjZGltLCJBSVRNIjphY2NvdW50aW5nSWRlbnRpdHldDQogICAgU3RyaW5nIGFjY0lkZW50aXR5ID0gbnVsbA0KICAgIENsb3N1cmU8Pz4gaGFuZGxlciA9IHsgTWFwPFN0cmluZywgU3RyaW5nPiByZXNwb25zZSAtPg0KICAgICAgaWYgKHJlc3BvbnNlLmVycm9yICE9IG51bGwpIHsNCiAgICAgICAgcmVzdWx0ID0gbnVsbA0KICAgICAgfSBlbHNlIHsNCiAgICAgICAgcmVzdWx0ID0gcmVzcG9uc2UNCiAgICAgIH0NCiAgICB9DQogICAgbWlDYWxsZXIuY2FsbCgiQ1JTNjMwTUkiLCJHZXRBY2NvdW50SUQiLCBwYXJhbXMsIGhhbmRsZXIpDQogICAgaWYocmVzdWx0LmVxdWFscyhudWxsKSl7DQogICAgICByZXN1bHRzID0gImZhbHNlIg0KICAgIH1lbHNlew0KICAgICAgcmVzdWx0LmVhY2h7DQogICAgICAgIGtleSwgdmFsdWUgLT4gcHJpbnQgdmFsdWUNCiAgICAgICAgaWYocmVzdWx0LmdldCgiQUlUTSIpICE9IG51bGwpew0KICAgICAgICAgIHJlc3VsdHMgPSAidHJ1ZSINCiAgICAgICAgfWVsc2V7DQogICAgICAgICAgcmVzdWx0cyA9ICJmYWxzZSINCiAgICAgICAgfQ0KICAgICAgfQ0KICAgIH0NCiAgICByZXR1cm4gcmVzdWx0cw0KICAgLy8gbWlDYWxsZXIuc2V0TGlzdE1heFJlY29yZHMoMSkNCiAgfQ0KICANCiAgIC8vLS0tIHZhbGlkYXRlQWNjRGltMg0KICBTdHJpbmcgdmFsaWRhdGVBY2NEaW1lbnNpb25zKFN0cmluZyBkaXZpc2lvbixTdHJpbmcgYWNjb3VudCwgU3RyaW5nIGFjY291bnRpbmdJZGVudGl0eSxTdHJpbmcgZGltKXsNCiAgICBTdHJpbmcgYWNjZGltID0gIjEiDQogICAgU3RyaW5nIHJlc3VsdDEgPSAiIg0KICAgIFN0cmluZyByZXN1bHRzID0gInRydWUiDQogICAgTWFwPFN0cmluZywgU3RyaW5nPiByZXN1bHQgPSBbOl0NCiAgICBNYXA8U3RyaW5nLCBTdHJpbmc+IHBhcmFtcyA9IFsiRElWSSI6ZGl2aXNpb24sIkFJVFAiOmFjY2RpbSwiQUlUTSI6YWNjb3VudF0NCiAgICBTdHJpbmcgYWNjUnVsZSA9IG51bGwNCiAgICBDbG9zdXJlPD8+IGhhbmRsZXIgPSB7IE1hcDxTdHJpbmcsIFN0cmluZz4gcmVzcG9uc2UgLT4NCiAgICAgIGlmIChyZXNwb25zZS5lcnJvciAhPSBudWxsKSB7DQogICAgICAgIHJlc3VsdCA9IG51bGwNCiAgICAgIH1lbHNlIHsNCiAgICAgICAgcmVzdWx0ID0gcmVzcG9uc2UNCiAgICAgIH0NCiAgICB9DQogICAgbWlDYWxsZXIuY2FsbCgiQ1JTNjMwTUkiLCJHZXRBY2NvdW50SUQiLCBwYXJhbXMsIGhhbmRsZXIpDQogICAgaWYocmVzdWx0LmVxdWFscyhudWxsKSl7DQogICAgICAvLyAgIG1pLmVycm9yKCJSZWNvcmRzIGRvZXMgbm90IGV4aXN0IityZXN1bHQpDQogICAgfWVsc2V7DQogICAgICByZXN1bHQuZWFjaHsNCiAgICAgICAga2V5LCB2YWx1ZSAtPiBwcmludCB2YWx1ZQ0KICAgICAgICAgIGlmKGRpbS5lcXVhbHMoIjIiKSl7DQogICAgICAgICAgICBpZihyZXN1bHQuZ2V0KCJBQ1IyIikgIT0gbnVsbCl7DQogICAgICAgICAgICAgIGFjY1J1bGUgPSByZXN1bHQuZ2V0KCJBQ1IyIikNCiAgICAgICAgICAgIH0NCiAgICAgICAgICB9DQogICAgICAgICAgaWYoZGltLmVxdWFscygiMyIpKXsNCiAgICAgICAgICAgIGlmKHJlc3VsdC5nZXQoIkFDUjMiKSAhPSBudWxsKXsNCiAgICAgICAgICAgICAgYWNjUnVsZSA9IHJlc3VsdC5nZXQoIkFDUjMiKQ0KICAgICAgICAgICAgfQ0KICAgICAgICAgIH0NCiAgICAgICAgICBpZihkaW0uZXF1YWxzKCI0Iikpew0KICAgICAgICAgICAgaWYocmVzdWx0LmdldCgiQUNSNCIpICE9IG51bGwpew0KICAgICAgICAgICAgICBhY2NSdWxlID0gcmVzdWx0LmdldCgiQUNSNCIpDQogICAgICAgICAgICB9DQogICAgICAgICAgfQ0KICAgICAgICAgIGlmKGRpbS5lcXVhbHMoIjUiKSl7DQogICAgICAgICAgICBpZihyZXN1bHQuZ2V0KCJBQ1I1IikgIT0gbnVsbCl7DQogICAgICAgICAgICANCiAgICAgICAgICAgICAgYWNjUnVsZSA9IHJlc3VsdC5nZXQoIkFDUjUiKQ0KICAgICAgICAgICAgfQ0KICAgICAgICAgIH0NCiAgICAgICAgICBpZihkaW0uZXF1YWxzKCI2Iikpew0KICAgICAgICAgIGlmKHJlc3VsdC5nZXQoIkFDUjYiKSAhPSBudWxsKXsNCiAgICAgICAgICAgIGFjY1J1bGUgPSByZXN1bHQuZ2V0KCJBQ1I2IikNCiAgICAgICAgICAgIH0NCiAgICAgICAgICB9DQogICAgICAgICAgaWYoZGltLmVxdWFscygiNyIpKXsNCiAgICAgICAgICAgIGlmKHJlc3VsdC5nZXQoIkFDUjciKSAhPSBudWxsKXsNCiAgICAgICAgICAgICAgYWNjUnVsZSA9IHJlc3VsdC5nZXQoIkFDUjciKQ0KICAgICAgICAgICAgfQ0KICAgICAgICAgIH0NCiAgICANCiAgICAgICAgICBpZihhY2NSdWxlLmVxdWFscygiMSIpKXsNCiAgICAgICAgICAgIC8vTWFuZGF0b3J5LCBubyBjaGVjawl2YWx1ZSBzaG91bGQgZXhpc3QNCiAgICAgICAgICAgIGlmKGFjY291bnRpbmdJZGVudGl0eT09bnVsbCYmYWNjb3VudGluZ0lkZW50aXR5LmVxdWFscygiIikpew0KICAgICAgICAgICAgIC8vICBtaS5lcnJvcigiVGhlcmUgaXMgbm8gcmVjb3JkcyAxISAiKQ0KICAgICAgICAgICAgICByZXN1bHRzID0gImZhbHNlIg0KICAgICAgICAgICAgfQ0KICAgICAgICAgIH0NCiAgICAgICAgICBpZihhY2NSdWxlLmVxdWFscygiMiIpKXsNCiAgICAgICAgICAgIGlmKGFjY291bnRpbmdJZGVudGl0eT09bnVsbCYmYWNjb3VudGluZ0lkZW50aXR5LmVxdWFscygiIikpew0KICAgICAgICAgICAgICAvLyAgICAgbWkuZXJyb3IoIlRoZXJlIGlzIG5vIHJlY29yZHMgMjEhICIpDQogICAgICAgICAgICAgIHJlc3VsdHMgPSAiZmFsc2UiDQogICAgICAgICAgICB9ZWxzZXsNCiAgICAgICAgICAgICAvLyB2YWxpZGF0ZSBBQ0NSdWxlIE1hbmRhdG9yeSwgbm8gY2hlY2sgYnV0IHJhbmdlIGNhbGwgTHN0QWNjb3VudElEQUNSDQogICAgICAgICAgICAgIFN0cmluZyAgdmFsQWNyUnVsZTIgPSIiDQogICAgICAgICAgICAgIHZhbEFjclJ1bGUyID0gICBsaXN0QWNjb3VudERhY3IoYWNjb3VudCxhY2NvdW50aW5nSWRlbnRpdHksZGltKQ0KICAgICAgICAgICAgICBpZih2YWxBY3JSdWxlMi5lcXVhbHMoImZhbHNlIikpew0KICAgICAgICAgICAgICAgIHJlc3VsdHMgPSAiZmFsc2UiDQogICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0NCiAgICAgICAgICB9DQogICAgICAgICAgaWYoYWNjUnVsZS5lcXVhbHMoIjMiKSl7DQogICAgICAgICAgICAvLyBtYW5kYXRvcnkgbXVzdCBjaGVjaw0KICAgICAgICAgICAgU3RyaW5nIHZhbEFjclJ1bGVzMyA9IiINCiAgICAgICAgICAgIHZhbEFjclJ1bGVzMyA9IHZhbGlkYXRlQWNyUnVsZTMoYWNjb3VudGluZ0lkZW50aXR5LGRpbSkNCiAgICAgICAgICAgIGlmKHZhbEFjclJ1bGVzMy5lcXVhbHMoImZhbHNlIikpew0KICAgICAgICAgICAgICByZXN1bHRzID0gImZhbHNlIg0KICAgICAgICAgICAgfSANCiAgICAgICAgICB9DQogICAgICAgICAgaWYoYWNjUnVsZS5lcXVhbHMoIjQiKSl7DQogICAgICAgICAgICBTdHJpbmcgIHZhbEFjclJ1bGU0ID0iIg0KICAgICAgICAgICAgdmFsQWNyUnVsZTQgPSAgIGxpc3RBY2NvdW50RGFjcihhY2NvdW50LGFjY291bnRpbmdJZGVudGl0eSxkaW0pDQogICAgICAgICAgICBpZih2YWxBY3JSdWxlNC5lcXVhbHMoImZhbHNlIikpew0KICAgICAgICAgICAgICByZXN1bHRzID0gImZhbHNlIg0KICAgICAgICAgICAgICANCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIFN0cmluZyB2YWxBY3JSdWxlczQgPSIiDQogICAgICAgICAgICB2YWxBY3JSdWxlczQgPSB2YWxpZGF0ZUFjclJ1bGUzKGFjY291bnRpbmdJZGVudGl0eSxkaW0pDQogICAgICAgICAgICBpZih2YWxBY3JSdWxlczQuZXF1YWxzKCJmYWxzZSIpKXsNCiAgICAgICAgICAgICAgcmVzdWx0cyA9ICJmYWxzZSINCiAgICAgICAgICAgIH0gDQogICAgICAgICAgfQ0KICAgICAgICAgIGlmKGFjY1J1bGUuZXF1YWxzKCI1Iikpew0KICAgICANCiAgICAgICAgICAgIGlmKGFjY291bnRpbmdJZGVudGl0eS50cmltKCkhPSIiKXsNCiAgICAgICAgICAgICAgcmVzdWx0cyA9ICJmYWxzZSINCiAgICAgICAgICAgIH0NCiAgICAgICAgICB9DQogICAgICAgICAgaWYoYWNjUnVsZS5lcXVhbHMoIjYiKSl7DQogICAgICAgICAgICBpZihhY2NvdW50aW5nSWRlbnRpdHkudHJpbSgpPT0iIil7DQogICAgICAgICAgIA0KICAgICAgICAgICAgfWVsc2V7DQogICAgICAgICAgICAgIFN0cmluZyAgdmFsQWNyUnVsZTYgPSIiDQogICAgICAgICAgICAgIHZhbEFjclJ1bGU2ID0gICBsaXN0QWNjb3VudERhY3IoYWNjb3VudCxhY2NvdW50aW5nSWRlbnRpdHksZGltKQ0KICAgICAgICAgICAgICBpZih2YWxBY3JSdWxlNi5lcXVhbHMoImZhbHNlIikpew0KICAgICAgICAgICAgICAgIHJlc3VsdHMgPSAiZmFsc2UiDQogICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0NCiAgICAgICAgICB9DQogICAgICAgIGlmKGFjY1J1bGUuZXF1YWxzKCI3Iikpew0KICAgICAgICAgIGlmKGFjY291bnRpbmdJZGVudGl0eS50cmltKCk9PSIiKXsNCiAgICAgICAgICAgIA0KICAgICAgICAgIH1lbHNlew0KICAgICAgICAgICAgU3RyaW5nIHZhbEFjclJ1bGVzNyA9IiINCiAgICAgICAgICAgIHZhbEFjclJ1bGVzNyA9IHZhbGlkYXRlQWNyUnVsZTMoYWNjb3VudGluZ0lkZW50aXR5LGRpbSkNCiAgICAgICAgICAgIGlmKHZhbEFjclJ1bGVzNy5lcXVhbHMoImZhbHNlIikpew0KICAgICAgICAgICAgICAvLyBtaS5lcnJvcigiVGhlcmUgaXMgbm8gcmVjb3JkcyAyISAiKQ0KICAgICAgICAgICAgICByZXN1bHRzID0gImZhbHNlIg0KICAgICAgICAgICAgfSANCiAgICAgICAgICB9DQogICAgICAgIH0NCiAgICAgICAgaWYoYWNjUnVsZS5lcXVhbHMoIjgiKSl7DQogICAgICAgICAgIGlmKGFjY291bnRpbmdJZGVudGl0eS50cmltKCk9PSIiKXsNCiAgICAgICAgICAgICANCiAgICAgICAgICAgfWVsc2V7DQogICAgICAgICAgICAgU3RyaW5nICB2YWxBY3JSdWxlOCA9IiINCiAgICAgICAgICAgICB2YWxBY3JSdWxlOCA9ICAgbGlzdEFjY291bnREYWNyKGFjY291bnQsYWNjb3VudGluZ0lkZW50aXR5LGRpbSkNCiAgICAgICAgICAgICBpZih2YWxBY3JSdWxlOC5lcXVhbHMoImZhbHNlIikpew0KICAgICAgICAgICAgICAgIC8vICBtaS5lcnJvcigiVGhlcmUgaXMgbm8gcmVjb3JkcyA4ISAiKQ0KICAgICAgICAgICAgICAgcmVzdWx0cyA9ICJmYWxzZSINCiAgICAgICAgICAgICAgIA0KICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICBTdHJpbmcgdmFsQWNyUnVsZXM4ID0iIg0KICAgICAgICAgICAgIHZhbEFjclJ1bGVzOCA9ICB2YWxpZGF0ZUFjclJ1bGUzKGFjY291bnRpbmdJZGVudGl0eSxkaW0pDQogICAgICAgICAgICAgaWYodmFsQWNyUnVsZXM4LmVxdWFscygiZmFsc2UiKSl7DQogICAgICAgICAgICAgICAvLyBtaS5lcnJvcigiVGhlcmUgaXMgbm8gcmVjb3JkcyAyISAiKQ0KICAgICAgICAgICAgICAgcmVzdWx0cyA9ICJmYWxzZSINCiAgICAgICAgICAgICAgIA0KICAgICAgICAgICAgIH0gDQogICAgICAgICAgIH0NCiAgICAgICAgfQ0KICAgICAgfQ0KICAgIH0NCiAgICByZXR1cm4gcmVzdWx0cw0KICB9DQogIA0KICAvLyBWYWxpZGF0ZSBBQ1IgUnVsZXMgMiBjYWxsIGxpc3RBY2NvdW50RGFjciBpZiBkaXZpc2lvbiBpcyBibGFuaw0KICBTdHJpbmcgbGlzdEFjY291bnREYWNyKFN0cmluZyBhY2MsIFN0cmluZyBhY2NEaW1uLCBTdHJpbmcgZGltKXsNCiAgICBTdHJpbmcgYWNjZGltID0gIjEiDQogICAgU3RyaW5nIGRpdmkgPSIiDQogICAgU3RyaW5nIGZsYWcgPSAidHJ1ZSINCiAgICBTdHJpbmcgcmVzdWx0MSA9ICJ0cnVlIg0KICAgIFN0cmluZyBmb3VuZFJlc3VsdCA9ICJ0cnVlIg0KICAgIE1hcDxTdHJpbmcsIFN0cmluZz4gcmVzdWx0ID0gWzpdDQogICAgTWFwPFN0cmluZywgU3RyaW5nPiBwYXJhbXMgPSBbIkRJVkkiOmRpdmksIkFJVFAiOmFjY2RpbSwiQUlUTSI6YWNjICwiQUlUViI6ZGltXQ0KICAgIFN0cmluZyBhY2NBSVRGID0gbnVsbA0KICAgIFN0cmluZyBhY2NBSVRUID0gbnVsbA0KICAgIENsb3N1cmU8Pz4gaGFuZGxlciA9IHsgTWFwPFN0cmluZywgU3RyaW5nPiByZXNwb25zZSAtPg0KICAgICAgaWYgKHJlc3BvbnNlLmVycm9yICE9IG51bGwpIHsNCiAgICAgICAgcmVzdWx0ID0gbnVsbA0KICAgICAgICAgICANCiAgICAgIH0gZWxzZSB7DQogICAgICAgIHJlc3VsdCA9IHJlc3BvbnNlDQogICAgICANCiAgICAgICAgaWYocmVzdWx0LmdldCgiQUlURiIpICE9IG51bGwpew0KICAgICAgICAgIGFjY0FJVEYgPSByZXN1bHQuZ2V0KCJBSVRGIikgIA0KICAgICAgICB9DQogICAgICAgIGlmKHJlc3VsdC5nZXQoIkFJVFQiKSAhPSBudWxsKXsNCiAgICAgICAgICBhY2NBSVRUID0gcmVzdWx0LmdldCgiQUlUVCIpIA0KICAgICAgICB9DQogICAgICAgIA0KICAgICAgICBpZihmb3VuZFJlc3VsdC5lcXVhbHMoInRydWUiKSl7DQogICAgICAgICAgaWYoYWNjRGltbi50cmltKCk+PWFjY0FJVEYudHJpbSgpICYmIGFjY0RpbW4udHJpbSgpIDw9IGFjY0FJVFQudHJpbSgpKXsNCiAgICAgICAgICAgICAgLy8gcGFzc2VkIHZhbGlkYXRpb24NCiAgICAgICAgICAgICAgcmVzdWx0MSA9ICJ0cnVlIg0KICAgICAgICAgICAgICBmb3VuZFJlc3VsdCA9ICJmYWxzZSINCiAgICAgICAgICB9ZWxzZXsNCiAgICAgICAgICAgICAvLyAgICBtaS5lcnJvcigiLS0iKyhhY2NEaW1uPj1hY2NBSVRGICYmIGFjY0RpbW4gPD0gYWNjQUlUVCkpDQogICAgICAgICAgICAgcmVzdWx0MSA9ICJmYWxzZSINCiAgICAgICAgICB9DQogICAgICAgIH0NCiAgICAgIH0NCiAgICB9DQogICAgbWlDYWxsZXIuY2FsbCgiQ1JTNjMwTUkiLCJMc3RBY2NvdW50SURBQ1IiLCBwYXJhbXMsIGhhbmRsZXIpDQogICAgaWYocmVzdWx0LmVxdWFscyhudWxsKSl7DQogICAgICBmbGFnID0gImZhbHNlIg0KICAgICANCiAgICB9ZWxzZXsNCiAgICAgIHJlc3VsdC5lYWNoew0KICAgICAga2V5LCB2YWx1ZSAtPiBwcmludCB2YWx1ZQ0KICAgICAgfQ0KICAgIH0NCiAgICBpZihmbGFnLmVxdWFscygiZmFsc2UiKSl7DQogICAgICANCiAgICAgIFN0cmluZyB2YWxpZExzdEFjY0RhYyA9ICIiDQogICAgICB2YWxpZExzdEFjY0RhYyA9ICBsaXN0QWNjb3VudERhY3JXaXRoRGl2KGFjYyxhY2NEaW1uLGRpbSkNCiAgICAgIA0KICAgICAgaWYodmFsaWRMc3RBY2NEYWMuZXF1YWxzKCJmYWxzZSIpKXsNCiAgICAgICAgIHJlc3VsdDEgPSAiZmFsc2UiDQogICAgICB9DQogICAgfQ0KICAgIHJldHVybiByZXN1bHQxDQogICAgIC8vIG1pQ2FsbGVyLnNldExpc3RNYXhSZWNvcmRzKDEpDQogIH0NCiAgLy8gVmFsaWRhdGUgQUNSIFJ1bGVzIDIgY2FsbCBsaXN0QWNjb3VudERhY3IgaWYgd2UgaGF2ZSBkaXZpc2lvbg0KICBTdHJpbmcgbGlzdEFjY291bnREYWNyV2l0aERpdihTdHJpbmcgYWNjLCBTdHJpbmcgYWNjRGltbiwgU3RyaW5nIGRpbSl7DQogICAgU3RyaW5nIGFjY2RpbSA9ICIxIg0KICAgIFN0cmluZyBkaXZpID0gbWkuaW4uZ2V0KCJESVZJIikNCiAgICBTdHJpbmcgcmVzdWx0MSA9ICJ0cnVlIg0KICAgIFN0cmluZyBmb3VuZFJlc3VsdCA9ICJ0cnVlIg0KICAgIE1hcDxTdHJpbmcsIFN0cmluZz4gcmVzdWx0ID0gWzpdDQogICAgTWFwPFN0cmluZywgU3RyaW5nPiBwYXJhbXMgPSBbIkRJVkkiOmRpdmksIkFJVFAiOmFjY2RpbSwiQUlUTSI6YWNjICwiQUlUViI6ZGltXQ0KICAgIFN0cmluZyBhY2NBSVRGID0gbnVsbA0KICAgIFN0cmluZyBhY2NBSVRUID0gbnVsbA0KICAgIENsb3N1cmU8Pz4gaGFuZGxlciA9IHsgTWFwPFN0cmluZywgU3RyaW5nPiByZXNwb25zZSAtPg0KICAgICAgaWYgKHJlc3BvbnNlLmVycm9yICE9IG51bGwpIHsNCiAgICAgICAgcmVzdWx0ID0gbnVsbA0KICAgICAgfSBlbHNlIHsNCiAgICAgICAgcmVzdWx0ID0gcmVzcG9uc2UNCiAgICAgICAgICBpZihyZXN1bHQuZ2V0KCJBSVRGIikgIT0gbnVsbCl7DQogICAgICAgICAgICBhY2NBSVRGID0gcmVzdWx0LmdldCgiQUlURiIpDQogICAgICAgICAgfQ0KICAgICAgICAgIGlmKHJlc3VsdC5nZXQoIkFJVFQiKSAhPSBudWxsKXsNCiAgICAgICAgICAgIGFjY0FJVFQgPSByZXN1bHQuZ2V0KCJBSVRUIikgIA0KICAgICAgICAgIH0NCiAgICAgDQogICAgICAgICBpZihmb3VuZFJlc3VsdC5lcXVhbHMoInRydWUiKSl7DQogICAgICAgICAgIGlmKGFjY0RpbW4udHJpbSgpPj1hY2NBSVRGLnRyaW0oKSAmJiBhY2NEaW1uLnRyaW0oKSA8PSBhY2NBSVRULnRyaW0oKSl7DQogICAgICAgICAgICAvLyBwYXNzZWQgdmFsaWRhdGlvbg0KICAgICAgICAgICAgcmVzdWx0MSA9ICJ0cnVlIg0KICAgICAgICAgICAgZm91bmRSZXN1bHQgPSAiZmFsc2UiDQogICAgICAgICAgfWVsc2V7DQogICAgICAgICAgICByZXN1bHQxID0gImZhbHNlIg0KICAgICAgICAgIH0NCiAgICAgICAgfQ0KICAgICAgfQ0KICAgIH0NCiAgICBtaUNhbGxlci5jYWxsKCJDUlM2MzBNSSIsIkxzdEFjY291bnRJREFDUiIsIHBhcmFtcywgaGFuZGxlcikNCiAgICBpZihyZXN1bHQuZXF1YWxzKG51bGwpKXsNCiAgICAgICByZXN1bHQxID0gImZhbHNlIg0KICAgIH1lbHNlew0KICAgICAgcmVzdWx0LmVhY2h7DQogICAgICAgIGtleSwgdmFsdWUgLT4gcHJpbnQgdmFsdWUNCiAgICAgIH0NCiAgICB9DQogICAgcmV0dXJuIHJlc3VsdDENCiAgfQ0KICANCiAgLy8gdmFsaWRhdGUgQWNyIFJ1bGUgMw0KICBTdHJpbmcgdmFsaWRhdGVBY3JSdWxlMyhTdHJpbmcgYWNjRGltbixTdHJpbmcgZGltKXsNCiAgICBTdHJpbmcgZGl2aSA9ICBtaS5pbi5nZXQoIkRJVkkiKQ0KICAgIE1hcDxTdHJpbmcsIFN0cmluZz4gcGFyYW1zMSA9IFsiRElWSSI6ZGl2aSwiQUlUUCI6ZGltLCJBSVRNIjphY2NEaW1uXQ0KICAgIFN0cmluZyBhY2NJZGVudGl0eSA9IG51bGwNCiAgICBTdHJpbmcgcmVzdWx0cyA9ICJ0cnVlIg0KICAgIE1hcDxTdHJpbmcsIFN0cmluZz4gcmVzdWx0ID0gWzpdDQogICAgU3RyaW5nIHJldFRleHRJRCA9ICIiDQogICAgU3RyaW5nIGVycm9yTWVzc2FnZT0gIiINCiAgICBTdHJpbmcgZXJyb3JNc2lkID0gIiINCiAgICBDbG9zdXJlPD8+IGhhbmRsZXIgPSB7DQogICAgICBNYXA8U3RyaW5nLCBTdHJpbmc+IHJlc3BvbnNlIC0+DQogICAgICBpZiAoIXJlc3BvbnNlLmNvbnRhaW5zS2V5KCJlcnJvciIpKSB7DQogICAgICAgIHJldFRleHRJRCA9IHJlc3BvbnNlLkFJVE0NCiAgICAgICAgcmVzdWx0cyA9ICJ0cnVlIg0KICAgICAgfWVsc2V7DQogICAgICAgIHJlc3VsdHMgPSAiZmFsc2UiDQogICAgICAgIGVycm9yTWVzc2FnZSA9IHJlc3BvbnNlLmVycm9yTWVzc2FnZQ0KICAgICAgICBlcnJvck1zaWQ9cmVzcG9uc2UuZXJyb3JNc2lkDQogICAgICB9DQogICAgfQ0KICAgIG1pQ2FsbGVyLmNhbGwoIkNSUzYzME1JIiwiR2V0QWNjb3VudElEIiwgcGFyYW1zMSwgaGFuZGxlcikNCiAgICByZXR1cm4gcmVzdWx0cw0KICB9DQp9"}}}